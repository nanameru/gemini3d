(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8649:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var s=r(5155),a=r(2115);function l(e){let{onFileSelected:t,accept:r="image/png,image/jpeg",maxSizeMB:l=5}=e,[n,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(null),c=(0,a.useRef)(null),m=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?i(!0):"dragleave"===e.type&&i(!1)},x=e=>{d(null);let t=e.type;if(!r.split(",").includes(t))return d("Invalid file type. Please upload ".concat(r.replace(/image\//g,"").replace(/,/g," or ")," files.")),!1;let s=1048576*l;return!(e.size>s)||(d("File is too large. Maximum size is ".concat(l,"MB.")),!1)},g=async e=>{if(!x(e))return;let r=new FileReader;r.readAsDataURL(e),r.onload=()=>{t(e,r.result.split(",")[1])}};return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"relative flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg transition-colors ".concat(n?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-700"),onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:e=>{e.preventDefault(),e.stopPropagation(),i(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&g(e.dataTransfer.files[0])},children:[(0,s.jsx)("input",{ref:c,type:"file",className:"hidden",accept:r,onChange:e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&g(e.target.files[0])}}),(0,s.jsx)("svg",{className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,s.jsxs)("p",{className:"mb-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["PNG or JPG (Max. ",l,"MB)"]}),(0,s.jsx)("button",{type:"button",onClick:()=>{var e;null===(e=c.current)||void 0===e||e.click()},className:"mt-4 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Select File"})]}),o&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:o})]})}function n(e){let{onApiKeyChange:t}=e,[r,l]=(0,a.useState)(""),[n,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=localStorage.getItem("gemini_api_key");e&&(l(e),t(e),d(!0))},[t]),(0,s.jsxs)("div",{className:"w-full p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Google AI API Key"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Enter your Gemini API key to use the 3D model generation feature.",(0,s.jsx)("a",{href:"https://ai.google.dev/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 ml-1 hover:underline",children:"Get an API key"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)("input",{type:n?"text":"password",value:r,onChange:e=>l(e.target.value),placeholder:"Enter your Gemini API key",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),(0,s.jsx)("button",{type:"button",onClick:()=>i(!n),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400",children:n?(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,s.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),(0,s.jsx)("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})]})})]}),o?(0,s.jsx)("button",{type:"button",onClick:()=>{localStorage.removeItem("gemini_api_key"),l(""),t(""),d(!1)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Clear"}):(0,s.jsx)("button",{type:"button",onClick:()=>{r.trim()&&(localStorage.setItem("gemini_api_key",r),t(r),d(!0))},disabled:!r.trim(),className:"px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(r.trim()?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Save"})]}),o&&(0,s.jsx)("p",{className:"mt-2 text-sm text-green-600 dark:text-green-400",children:"API key saved successfully!"})]})}function i(){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",children:[(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("p",{className:"mt-4 text-lg font-medium",children:"Processing..."}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Analyzing physics diagram and generating 3D model..."})]})}function o(e){let{message:t,onRetry:r}=e;return(0,s.jsx)("div",{className:"w-full p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-red-600 dark:text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),(0,s.jsx)("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:(0,s.jsx)("p",{children:t})}),r&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{type:"button",onClick:r,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:text-red-200 dark:bg-red-900 dark:hover:bg-red-800",children:"Try again"})})]})]})})}var d=r(6552),c=r(7558),m=r(5011),x=r(4688),g=r(8751),p=r(3264);let u=e=>{let{object:t}=e,r=(0,a.useRef)(null),l=new p.Q1f(t.color),n=t.rotation.map(e=>e*Math.PI/180);return(0,s.jsxs)("mesh",{ref:r,position:t.position,rotation:n,scale:t.scale,children:[(()=>{switch(t.type.toLowerCase()){case"cube":case"box":default:return(0,s.jsx)("boxGeometry",{args:[1,1,1]});case"sphere":return(0,s.jsx)("sphereGeometry",{args:[.5,32,32]});case"cylinder":return(0,s.jsx)("cylinderGeometry",{args:[.5,.5,1,32]});case"cone":return(0,s.jsx)("coneGeometry",{args:[.5,1,32]});case"plane":return(0,s.jsx)("planeGeometry",{args:[1,1]})}})(),(0,s.jsx)("meshStandardMaterial",{color:l})]})},h=e=>{let{force:t}=e,{magnitude:r,direction:a,application_point:l}=t,n=new p.Pq0(...a);n.normalize().multiplyScalar(r);let i=new p.Pq0(...l),o=new p.Pq0().copy(i).add(n);return(0,s.jsxs)("group",{children:[(0,s.jsxs)("line",{children:[(0,s.jsx)("bufferGeometry",{attach:"geometry",children:(0,s.jsx)("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([...i.toArray(),...o.toArray()]),3]})}),(0,s.jsx)("lineBasicMaterial",{attach:"material",color:"red",linewidth:2})]}),(0,s.jsxs)("mesh",{position:o.toArray(),rotation:[0,0,Math.atan2(n.y,n.x)],children:[(0,s.jsx)("coneGeometry",{args:[.1,.3,8]}),(0,s.jsx)("meshBasicMaterial",{color:"red"})]})]})},y=e=>{let{modelData:t}=e,{camera:r}=(0,d.A)();return(0,a.useEffect)(()=>{r.position.set(5,5,5),r.lookAt(0,0,0)},[r,t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ambientLight",{intensity:.5}),(0,s.jsx)("directionalLight",{position:[10,10,5],intensity:1}),t.objects.map(e=>(0,s.jsx)(u,{object:e},e.id)),t.physics.forces.map((e,t)=>(0,s.jsx)(h,{force:e},"force-".concat(t))),(0,s.jsx)(m.x,{infiniteGrid:!0,position:[0,-.01,0]}),(0,s.jsx)(x.N,{makeDefault:!0}),(0,s.jsx)(g.OH,{preset:"city"})]})};function f(e){let{modelData:t}=e;return(0,s.jsx)("div",{className:"w-full h-[300px] sm:h-[400px] md:h-[450px] lg:h-[500px] rounded-lg overflow-hidden",children:(0,s.jsx)(c.Hl,{shadows:!0,children:(0,s.jsx)(y,{modelData:t})})})}var b=r(7811);let j=e=>new b.ij(e),v=async(e,t)=>{try{let r=e.getGenerativeModel({model:"gemini-1.5-pro"}),s=await r.generateContent(['\n      Analyze this physics diagram and provide detailed information for creating a 3D model:\n      1. Identify all objects and their physical properties (size, shape, mass if indicated)\n      2. Identify physical concepts shown (levers, forces, etc.)\n      3. Provide exact measurements and positions for all objects\n      4. Describe how objects interact with each other\n      5. Format the response as a JSON object with the following structure:\n      {\n        "objects": [\n          {\n            "id": "unique_id",\n            "type": "cube|sphere|cylinder|etc",\n            "position": [x, y, z],\n            "rotation": [x, y, z],\n            "scale": [x, y, z],\n            "color": "hexcolor",\n            "properties": {\n              "mass": number,\n              "other_relevant_properties": values\n            }\n          }\n        ],\n        "physics": {\n          "type": "lever|pendulum|etc",\n          "properties": {\n            "relevant_properties": values\n          },\n          "forces": [\n            {\n              "type": "gravity|applied|etc",\n              "magnitude": number,\n              "direction": [x, y, z],\n              "application_point": [x, y, z]\n            }\n          ]\n        },\n        "interactions": [\n          {\n            "type": "collision|joint|etc",\n            "objects": ["object_id1", "object_id2"],\n            "properties": {\n              "relevant_properties": values\n            }\n          }\n        ]\n      }\n    ',{inlineData:{data:t,mimeType:"image/png"}}]),a=(await s.response).text();try{let e=a.match(/\{[\s\S]*\}/);if(e)return JSON.parse(e[0]);throw Error("No valid JSON found in response")}catch(e){throw console.error("Error parsing JSON from Gemini response:",e),Error("Failed to parse 3D model data from Gemini response")}}catch(e){throw console.error("Error analyzing diagram with Gemini:",e),e}};function w(){let[e,t]=(0,a.useState)(""),[r,d]=(0,a.useState)(null),[c,m]=(0,a.useState)(null),[x,g]=(0,a.useState)(!1),[p,u]=(0,a.useState)(null),[h,y]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(e)try{let t=j(e);d(t),u(null)}catch(e){u("Failed to initialize Gemini API. Please check your API key."),console.error("Error initializing Gemini API:",e)}else d(null)},[e]);let b=async()=>{if(!r||!c){u("Please provide both an API key and an image to analyze.");return}g(!0),u(null);try{let e=await v(r,c);y(e)}catch(t){let e=t instanceof Error?t.message:"Unknown error";u("Error analyzing image: ".concat(e)),console.error("Error analyzing image:",t)}finally{g(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen p-6 bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-gray-800",children:[(0,s.jsxs)("header",{className:"max-w-6xl mx-auto mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center mb-2",children:"3D Anything - Physics Visualizer"}),(0,s.jsx)("p",{className:"text-center text-gray-600 dark:text-gray-400",children:"Upload a physics diagram and see it come to life in 3D using Gemini 2.5 Pro"})]}),(0,s.jsx)("main",{className:"max-w-6xl mx-auto",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 lg:gap-8",children:[(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 sm:p-6",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"1. Enter API Key"}),(0,s.jsx)(n,{onApiKeyChange:e=>{t(e)}})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 sm:p-6",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"2. Upload Physics Diagram"}),(0,s.jsx)(l,{onFileSelected:(e,t)=>{m(t),y(null),u(null)}}),c&&(0,s.jsxs)("div",{className:"mt-3 sm:mt-4",children:[(0,s.jsx)("h3",{className:"text-base sm:text-lg font-medium mb-2",children:"Selected Image:"}),(0,s.jsx)("div",{className:"relative w-full h-36 sm:h-48 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden",children:(0,s.jsx)("img",{src:"data:image/png;base64,".concat(c),alt:"Selected physics diagram",className:"object-contain w-full h-full"})})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 sm:p-6",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"3. Generate 3D Model"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[(0,s.jsx)("button",{onClick:b,disabled:!c||!e||x,className:"px-3 sm:px-4 py-2 rounded-lg w-full ".concat(c&&e&&!x?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:x?"Analyzing...":"Analyze with Gemini"}),(0,s.jsx)("button",{onClick:()=>{y({objects:[{id:"lever",type:"box",position:[0,0,0],rotation:[0,0,0],scale:[4,.2,.5],color:"#4287f5",properties:{mass:1}},{id:"fulcrum",type:"cone",position:[0,-.5,0],rotation:[180,0,0],scale:[.5,.5,.5],color:"#3a3a3a",properties:{mass:5}},{id:"weight",type:"box",position:[1.5,.5,0],rotation:[0,0,0],scale:[.8,.8,.8],color:"#e84393",properties:{mass:2}}],physics:{type:"lever",properties:{fulcrum_position:[0,0,0]},forces:[{type:"gravity",magnitude:9.8,direction:[0,-1,0],application_point:[0,0,0]},{type:"applied",magnitude:5,direction:[0,1,0],application_point:[-1.5,0,0]}]},interactions:[{type:"joint",objects:["lever","fulcrum"],properties:{type:"pivot"}}]}),u(null)},className:"px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 w-full mt-2 sm:mt-0",children:"Use Sample Data"})]}),p&&(0,s.jsx)("div",{className:"mt-3 sm:mt-4",children:(0,s.jsx)(o,{message:p,onRetry:b})})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 sm:p-6 min-h-[400px] sm:min-h-[500px]",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"3D Physics Model"}),x?(0,s.jsx)(i,{}):h?(0,s.jsxs)("div",{children:[(0,s.jsx)(f,{modelData:h}),(0,s.jsxs)("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-base sm:text-lg font-medium mb-2",children:"Physics Properties"}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Type: ",h.physics.type]}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:["Objects: ",h.objects.length]}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-2",children:[(0,s.jsx)("strong",{children:"Tip:"})," Use mouse/touch to rotate, scroll/pinch to zoom, and right-click/two-finger drag to pan."]})]})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-[300px] sm:h-[400px] text-center",children:[(0,s.jsx)("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 mb-3 sm:mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),(0,s.jsx)("h3",{className:"text-base sm:text-lg font-medium",children:"No 3D Model Yet"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2 max-w-xs sm:max-w-sm md:max-w-md",children:'Upload a physics diagram and click "Analyze with Gemini" to generate a 3D model, or click "Use Sample Data" to see an example.'})]})]})]})}),(0,s.jsx)("footer",{className:"max-w-6xl mx-auto mt-12 text-center text-sm text-gray-500 dark:text-gray-400",children:(0,s.jsx)("p",{children:"Built with Next.js, Three.js, and Gemini 2.5 Pro"})})]})}},9556:(e,t,r)=>{Promise.resolve().then(r.bind(r,8649))}},e=>{var t=t=>e(e.s=t);e.O(0,[367,831,413,23,441,684,358],()=>t(9556)),_N_E=e.O()}]);